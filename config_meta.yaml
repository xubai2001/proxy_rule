mixed-port: 7890
tproxy-port: 7893
allow-lan: true
mode: rule
log-level: info
external-controller: 127.0.0.1:9090
dns:
  enable: true
  ipv6: false
  use-hosts: true
  enhanced-mode: fake-ip
  listen: 127.0.0.1:53
  nameserver:
  - https://doh.pub/dns-query
  - 114.114.114.114
  - 119.29.29.29
  fake-ip-ranger: 198.18.0.1/16
  fallback:
  - https://1.1.1.1/dns-query
  - tls://1.0.0.1/dns-query
  - tls://8.8.8.8:853
  - 8.8.4.4
  fake-ip-filter:
  - '*.lan'
  - localhost.ptlogin2.qq.com
  - 172.16.154.130
  fallback-filter:
    geoip: true
    geosite:
      - gfw
    geoip-code: CN
    ipcidr:
      - 240.0.0.0/4
      - 120.232.192.250
    domain:
      - '+.google.com'
      - '+.youtube.com'

iptables:
  enable: true
  inbound-interface: wlo1


# Enable the TUN listener
# tun:
#   enable: true
#   stack: gvisor #  only gvisor
#   dns-hijack:
#     - 0.0.0.0:53 # additional dns server listen on TUN
#   auto-route: true # auto set global route

p: &p
  type: http
  interval: 3600
  health-check:
    enable: true
    url: http://www.gstatic.com/generate_204
    interval: 300

c: &rule-classical
  type: http
  behavior: classical
  interval: 86400

proxies:
  - name: GLaDOS-D1-00
    server: server
    port: port
    type: vless
    uuid: uuid
    tls: true
    servername: n2.gladns.com
    skip-cert-verify: false
    udp: true

  - name: GLaDOS-D1-01
    server: server
    port: port
    type: vless
    uuid: uuid
    tls: true
    servername: n2.gladns.com
    skip-cert-verify: false
    udp: true

proxy-providers:
  glados:
    <<: *p
    path: ./proxies/glados.yaml
    url: url

  okz2:
    <<: *p
    path: ./proxies/okz2.yaml
    url: url
    headers: "User-Agent:ClashForWindows"

rule-providers:
  bilibili:
    <<: *rule-classical
    url: https://raw.githubusercontent.com/xubai2001/proxy_rule/master/Bilibili.yaml
    path: ./ruleset/bilibili.yaml

  YouTube:
    <<: *rule-classical
    url: https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/Providers/Ruleset/YouTube.yaml
    path: ./ruleset/YouTube.yaml

  Telegram:
    <<: *rule-classical
    url: https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/Providers/Ruleset/Telegram.yaml
    path: ./ruleset/Telegram.yaml

  custom_direct:
    <<: *rule-classical
    url: https://raw.githubusercontent.com/xubai2001/proxy_rule/master/direct.yaml
    path: ./ruleset/custom_direct.yaml

  custom_proxy:
    <<: *rule-classical
    url: https://raw.githubusercontent.com/xubai2001/proxy_rule/master/proxy.yaml
    path: ./ruleset/custom_proxy.yaml

g: &no_cn
  proxies:
    - ðŸš€ èŠ‚ç‚¹é€‰æ‹©
    - â™»ï¸ è‡ªåŠ¨é€‰æ‹©
    - ðŸ‡¸ðŸ‡¬ ç‹®åŸŽèŠ‚ç‚¹
    - ðŸ‡­ðŸ‡° é¦™æ¸¯èŠ‚ç‚¹
    - ðŸ‡¨ðŸ‡³ å°æ¹¾èŠ‚ç‚¹
    - ðŸ‡¯ðŸ‡µ æ—¥æœ¬èŠ‚ç‚¹
    - ðŸ‡ºðŸ‡² ç¾Žå›½èŠ‚ç‚¹
    - ðŸ‡°ðŸ‡· éŸ©å›½èŠ‚ç‚¹
    - ðŸš€ æ‰‹åŠ¨åˆ‡æ¢

f: &add_cn
  proxies:
    - ðŸš€ èŠ‚ç‚¹é€‰æ‹©
    - â™»ï¸ è‡ªåŠ¨é€‰æ‹©
    - ðŸ‡¸ðŸ‡¬ ç‹®åŸŽèŠ‚ç‚¹
    - ðŸ‡­ðŸ‡° é¦™æ¸¯èŠ‚ç‚¹
    - ðŸ‡¨ðŸ‡³ å°æ¹¾èŠ‚ç‚¹
    - ðŸ‡¯ðŸ‡µ æ—¥æœ¬èŠ‚ç‚¹
    - ðŸ‡ºðŸ‡² ç¾Žå›½èŠ‚ç‚¹
    - ðŸ‡°ðŸ‡· éŸ©å›½èŠ‚ç‚¹
    - ðŸš€ æ‰‹åŠ¨åˆ‡æ¢
    - ðŸŽ¯ å…¨çƒç›´è¿ž

proxy-groups:
  - name: ðŸš€ èŠ‚ç‚¹é€‰æ‹©
    type: select
    proxies:
    - â™»ï¸ è‡ªåŠ¨é€‰æ‹©
    - ðŸ‡­ðŸ‡° é¦™æ¸¯èŠ‚ç‚¹
    - ðŸ‡¨ðŸ‡³ å°æ¹¾èŠ‚ç‚¹
    - ðŸ‡¸ðŸ‡¬ ç‹®åŸŽèŠ‚ç‚¹
    - ðŸ‡¯ðŸ‡µ æ—¥æœ¬èŠ‚ç‚¹
    - ðŸ‡ºðŸ‡² ç¾Žå›½èŠ‚ç‚¹
    - ðŸ‡°ðŸ‡· éŸ©å›½èŠ‚ç‚¹
    - ðŸš€ æ‰‹åŠ¨åˆ‡æ¢

  - name: ðŸš€ æ‰‹åŠ¨åˆ‡æ¢
    type: select
    use:
      - glados
      - okz2
    proxies:
      - DIRECT
      - GLaDOS-D1-00
      - GLaDOS-D1-01

  - name: â™»ï¸ è‡ªåŠ¨é€‰æ‹©
    type: url-test
    url: http://www.gstatic.com/generate_204
    interval: 300
    use:
      - glados
      - okz2
    filter: "GLaDOS-N2|é¦™æ¸¯"

  - name: ðŸŽ¯ å…¨çƒç›´è¿ž
    type: select
    proxies:
    - DIRECT
    - ðŸš€ èŠ‚ç‚¹é€‰æ‹©
    - â™»ï¸ è‡ªåŠ¨é€‰æ‹©

  - name: ðŸŸ æ¼ç½‘ä¹‹é±¼
    type: select
    <<: *add_cn

  - name: ðŸ“² ç”µæŠ¥æ¶ˆæ¯
    type: select
    <<: *no_cn

  - name: ðŸ“¹ æ²¹ç®¡è§†é¢‘
    type: select
    <<: *no_cn

  - name: ðŸ“º å“”å“©å“”å“©
    type: select
    proxies:
    - ðŸŽ¯ å…¨çƒç›´è¿ž
    - ðŸ‡¨ðŸ‡³ å°æ¹¾èŠ‚ç‚¹
    - ðŸ‡­ðŸ‡° é¦™æ¸¯èŠ‚ç‚¹

  - name: â“‚ï¸ å¾®è½¯äº‘ç›˜
    type: select
    <<: *add_cn

  - name: â“‚ï¸ å¾®è½¯æœåŠ¡
    type: select
    proxies:
    - â“‚ï¸ å¾®è½¯äº‘ç›˜

  - name: ðŸŽ¥ å¥ˆé£žè§†é¢‘
    type: select
    proxies:
    - ðŸŽ¥ å¥ˆé£žèŠ‚ç‚¹

  - name: ðŸ›‘ å¹¿å‘Šæ‹¦æˆª
    type: select
    proxies:
    - REJECT
    - DIRECT

  - name: ðŸ‡­ðŸ‡° é¦™æ¸¯èŠ‚ç‚¹
    type: select
    use:
        - glados
        - okz2
    filter: "HK|é¦™æ¸¯|æ¸¯"

  - name: ðŸ‡¯ðŸ‡µ æ—¥æœ¬èŠ‚ç‚¹
    type: url-test
    url: http://www.gstatic.com/generate_204
    interval: 300
    use:
      - glados
      - okz2
    filter: "JP|æ—¥æœ¬"

  - name: ðŸ‡¨ðŸ‡³ å°æ¹¾èŠ‚ç‚¹
    type: select
    use:
      - glados
      - okz2
    filter: "TW|å°æ¹¾|tw"

  - name: ðŸ‡¸ðŸ‡¬ ç‹®åŸŽèŠ‚ç‚¹
    type: url-test
    url: http://www.gstatic.com/generate_204
    interval: 300
    use:
      - glados
      - okz2
    filter: "SG|æ–°åŠ å¡"

  - name: ðŸ‡ºðŸ‡² ç¾Žå›½èŠ‚ç‚¹
    type: url-test
    url: http://www.gstatic.com/generate_204
    interval: 300
    use:
      - glados
      - okz2
    filter: "US|ç¾Žå›½|è¥¿é›…å›¾|ç¾Žåœ‹"

  - name: ðŸ‡°ðŸ‡· éŸ©å›½èŠ‚ç‚¹
    type: url-test
    url: http://www.gstatic.com/generate_204
    interval: 300
    use:
      - glados
      - okz2
    filter: "éŸ©å›½|æ˜¥å·"

  - name: ðŸŽ¥ å¥ˆé£žèŠ‚ç‚¹
    type: select
    use:
      - glados
      - okz2
    filter: "Netfilix|Netflix|å¥ˆé£ž"

rules:
  - RULE-SET, custom_proxy, ðŸš€ èŠ‚ç‚¹é€‰æ‹©
  - RULE-SET, custom_direct, ðŸŽ¯ å…¨çƒç›´è¿ž
  - GEOSITE, bilibili, ðŸ“º å“”å“©å“”å“©
  - GEOSITE, youtube, ðŸ“¹ æ²¹ç®¡è§†é¢‘
  - RULE-SET, Telegram, ðŸ“² ç”µæŠ¥æ¶ˆæ¯
  - GEOSITE,category-ads-all,ðŸ›‘ å¹¿å‘Šæ‹¦æˆª
  - GEOSITE,geolocation-cn, ðŸŽ¯ å…¨çƒç›´è¿ž
  - GEOSITE,geolocation-!cn, ðŸš€ èŠ‚ç‚¹é€‰æ‹©
  - GEOIP, CN, ðŸŽ¯ å…¨çƒç›´è¿ž
  - MATCH, ðŸŸ æ¼ç½‘ä¹‹é±¼
